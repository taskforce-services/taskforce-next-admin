(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{2426:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invoices",function(){return s(9674)}])},9674:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var r=s(7568),n=s(4051),a=s.n(n),l=s(5893),i=s(9008),c=s.n(i),d=s(7294),o=s(9669),x=s.n(o),m=s(2920),u=(s(993),s(4323)),h=s(1183),f=s(9422),y=s(4201),v=s(6038),p=s(3672),j=s(9005),b=s(4135),g=s(1886),N=s(6843),Z=s(3205),w=s(9160);function k(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var M=function(e){var t=e.innerRef,s=e.selectedDay,r=e.setSelectedDay,n=(0,d.useState)((0,y.Z)((0,v.Z)(Date.now(),{months:1}),"MMM-yyyy")),a=n[0],i=n[1],c=(0,p.Z)(a,"MMM-yyyy",new Date),o=(0,j.Z)({start:c,end:(0,b.Z)(c)});return(0,l.jsx)("div",{ref:t,className:"absolute bg-white pt-2",children:(0,l.jsx)("div",{className:"max-w-md px-4 mx-auto sm:px-7 md:max-w-4xl md:px-6",children:(0,l.jsx)("div",{className:"md:grid md:divide-x md:divide-gray-200",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h2",{className:"flex-auto font-semibold text-gray-900",children:(0,y.Z)(c,"MMMM yyyy")}),(0,l.jsxs)("button",{type:"button",onClick:function(){var e=(0,f.Z)(c,{months:-1});i((0,y.Z)(e,"MMM-yyyy"))},className:"-my-1.5 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[(0,l.jsx)("span",{className:"sr-only",children:"Previous month"}),(0,l.jsx)(u.Z,{className:"w-5 h-5","aria-hidden":"true"})]}),(0,l.jsxs)("button",{onClick:function(){var e=(0,f.Z)(c,{months:1});i((0,y.Z)(e,"MMM-yyyy"))},type:"button",className:"-my-1.5 -mr-1.5 ml-2 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[(0,l.jsx)("span",{className:"sr-only",children:"Next month"}),(0,l.jsx)(h.Z,{className:"w-5 h-5","aria-hidden":"true"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-7 mt-10 text-xs leading-6 text-center text-gray-500",children:[(0,l.jsx)("div",{children:"M"}),(0,l.jsx)("div",{children:"T"}),(0,l.jsx)("div",{children:"W"}),(0,l.jsx)("div",{children:"T"}),(0,l.jsx)("div",{children:"F"}),(0,l.jsx)("div",{children:"S"}),(0,l.jsx)("div",{children:"S"})]}),(0,l.jsx)("div",{className:"grid grid-cols-7 mt-2 text-sm",children:o.map((function(e,t){return(0,l.jsx)("div",{className:k(0===t&&(0===(0,g.Z)(e)&&S[(0,g.Z)(e)+7]||S[(0,g.Z)(e)]),"py-1.5"),children:(0,l.jsx)("button",{type:"button",onClick:function(){return r(e)},className:k((0,N.Z)(e,s)&&"text-white border bg-blue",!(0,N.Z)(e,s)&&(0,Z.Z)(e)&&"text-red-500",!(0,N.Z)(e,s)&&!(0,Z.Z)(e)&&(0,w.Z)(e,c)&&"text-gray-900",!(0,N.Z)(e,s)&&!(0,Z.Z)(e)&&!(0,w.Z)(e,c)&&"text-gray-400",(0,N.Z)(e,s)&&(0,Z.Z)(e)&&"bg-red-500",(0,N.Z)(e,s)&&!(0,Z.Z)(e)&&"bg-gray-900",!(0,N.Z)(e,s)&&"hover:bg-gray-200",((0,N.Z)(e,s)||(0,Z.Z)(e))&&"font-semibold","mx-auto flex h-8 w-8 items-center justify-center rounded-full"),children:(0,l.jsx)("time",{dateTime:(0,y.Z)(e,"yyyy-MM-dd"),children:(0,y.Z)(e,"d")})})},e.toString())}))})]})})})})},S=["","col-start-1","col-start-2","col-start-3","col-start-4","col-start-5","col-start-6","col-start-7"],_=s(3703),C=s(8230),D=s(3240);function E(){var e=(0,d.useState)(!1),t=e[0],s=e[1],n=(0,d.useState)(""),i=n[0],o=n[1],u=(0,d.useState)(!1),h=u[0],f=u[1],p=(0,d.useState)(!1),j=p[0],b=p[1],g=(0,v.Z)(Date.now(),{months:1}),N=(0,_.Z)(g),Z=(0,C.Z)(g),w=(0,d.useState)(N),k=w[0],S=w[1],D=(0,d.useState)(Z),E=D[0],O=D[1],P=(0,d.useRef)(null),A=(0,d.useRef)(null);(0,d.useEffect)((function(){var e=function(e){P.current&&!P.current.contains(e.target)&&b(!1),A.current&&!A.current.contains(e.target)&&f(!1)};return document.addEventListener("click",e,!0),function(){document.removeEventListener("click",e,!0)}}),[]);var R={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},T=function(){var e=(0,r.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b(!1),f(!1),E&&k){e.next=7;break}m.Am.error("Please select a date range",R),e.next=28;break;case 7:if(!(k>E)){e.next=11;break}m.Am.error("Please select a valid date range",R),e.next=27;break;case 11:if(s(!0),r={from:(0,y.Z)(k,"yyyy-MM-dd"),to:(0,y.Z)(E,"yyyy-MM-dd")},n=localStorage.getItem("key")){e.next=18;break}m.Am.error("Please first enter your pipedream access key on the Settings screen.",R),e.next=27;break;case 18:return e.prev=18,e.next=21,x().post("/api/pipedreams/".concat(n),r);case 21:m.Am.success("Invoice created successfully.",R),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(18),m.Am.error("An error has occurred, please check you are using a valid key",R);case 27:s(!1);case 28:case"end":return e.stop()}}),e,null,[[18,24]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("section",{className:"md:m-10 xs:ml-8 xs:m-2 w-10/12",children:[(0,l.jsxs)(c(),{children:[(0,l.jsx)("title",{children:"Taskforce Monthly Invoicing"}),(0,l.jsx)("link",{rel:"icon",href:"/taskforce-next-admin/favicon.ico"})]}),(0,l.jsx)("main",{children:(0,l.jsx)("div",{className:"py-6",children:(0,l.jsxs)("form",{onSubmit:T,className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Monthly Billing"}),(0,l.jsxs)("h2",{className:"text-xl flex font-semibold mt-9",children:["1. Review all records in",(0,l.jsx)("a",{href:"https://app.clockify.me/reports/summary",target:"_blank",children:(0,l.jsx)("h2",{className:"ml-2 text-blue underline font-sans text-xl",children:"clockify.me"})})]}),(0,l.jsx)("h2",{className:"text-xl flex font-semibold mt-9",children:"2. Send invoices to stripe"}),(0,l.jsxs)("div",{className:"md:flex",children:[(0,l.jsxs)("div",{className:"flex flex-col mt-10 bg-white max-w-md xs:w-full w-5/12 p-3",children:[(0,l.jsx)("label",{className:"text-xl font-semibold",children:"Period Start"}),(0,l.jsx)("input",{className:"border w-full h-9 mt-4 rounded border-gray",onClick:function(){j&&b(!1),f(!h)},readOnly:!0,value:(0,y.Z)(k,"yyyy-MM-dd")}),(0,l.jsx)("div",{className:"ml-0",children:h&&(0,l.jsx)(M,{innerRef:A,selectedDay:k,setSelectedDay:S})})]}),(0,l.jsxs)("div",{className:"md:ml-2 flex flex-col mt-10 bg-white max-w-md xs:w-full w-9/12 p-3",children:[(0,l.jsx)("label",{className:"text-xl font-semibold",children:"Period End"}),(0,l.jsx)("input",{className:"border w-full h-9 mt-4 rounded border-gray",onClick:function(e){h&&f(!1),b(!j),k>E?m.Am.warn("End date cannot be earlier than the Start date",R):o("")},readOnly:!0,value:(0,y.Z)(E,"yyyy-MM-dd")}),(0,l.jsx)("div",{className:"ml-0",children:j&&(0,l.jsx)(M,{innerRef:P,selectedDay:E,setSelectedDay:O})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col max-w-4xl",children:[i&&(0,l.jsx)("span",{className:"text-sm text-red",children:i}),t&&(0,l.jsx)("div",{className:"self-center border-8 border-white border-t-skyblue rounded-full border-t-8 w-[3rem] h-[3rem] animate-spin mt-4"}),(0,l.jsx)("button",{className:"sm:w-[300px] xs:w-[250px] mt-10 md:self-end xs:self-center p-1.5 rounded text-white h-9 bg-indigo mt-4",type:"submit",children:"Create Invoices"})]}),(0,l.jsxs)("h2",{className:"text-xl flex font-semibold mt-9",children:["3. Review invoice records and send via",(0,l.jsx)("a",{href:"https://dashboard.stripe.com/invoices",target:"_blank",children:(0,l.jsx)("h2",{className:"ml-2 text-blue underline font-sans text-xl",children:"stripe.com"})})]}),(0,l.jsx)(m.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})})]})}E.getLayout=function(e){return(0,l.jsx)(D.Z,{children:e})}}},function(e){e.O(0,[911,217,893,240,774,888,179],(function(){return t=2426,e(e.s=t);var t}));var t=e.O();_N_E=t}]);